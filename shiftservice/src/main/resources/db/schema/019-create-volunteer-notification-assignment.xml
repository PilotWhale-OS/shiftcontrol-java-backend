<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
  xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd">


  <changeSet id="019-create-volunteer-notification-assignment" author="paul">

    <renameColumn tableName="volunteer" oldColumnName="name" newColumnName="username"/>

    <createTable tableName="volunteer_notification_assignment">

      <column name="volunteer_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>

      <column name="notification_type" type="VARCHAR(50)">
        <constraints nullable="false"/>
      </column>

      <column name="notification_channel" type="VARCHAR(50)">
        <constraints nullable="false"/>
      </column>

    </createTable>

    <!-- Primary key on both columns -->
    <addPrimaryKey
      tableName="volunteer_notification_assignment"
      columnNames="volunteer_id, notification_type"
      constraintName="pk_volunteer_notification_assignment"/>

  </changeSet>

</databaseChangeLog>
